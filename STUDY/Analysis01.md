# Analysis01

## Analysis Target

- [Experiment12.md](Experiment12.md)

## The Analysis

- If the main window MMainWnd has created, then WM_CREATE is posted.
- MMainWnd receives a WM_SHOWWINDOW post (maybe because of ShowWindow call).
- The IME window receives a WM_WINDOWPOSCHANGING post, and then MMainWnd receives a WM_WINDOWPOSCHANGING post with the same parameters.
- The IME window receives a WM_WINDOWPOSCHANGING post again, and then MMainWnd receives a WM_WINDOWPOSCHANGING post with the same parameters.
- The IME window receives a WM_ACTIVATEAPP post, and then MMainWnd receives a WM_ACTIVATEAPP post with the same parameters.
- MMainWnd receives a WM_NCACTIVATE post (activation). This WM_NCACTIVATE post causes the following sequence:
    - MMainWnd:P: WM_GETICON(hwnd:00890268, nType:2, dpi:00000000)
    - MMainWnd:R: WM_GETICON: hwnd:00890268, lResult:00000000
    - MMainWnd:P: WM_GETICON(hwnd:00890268, nType:0, dpi:00000000)
    - MMainWnd:R: WM_GETICON: hwnd:00890268, lResult:00000000
    - MMainWnd:P: WM_GETICON(hwnd:00890268, nType:1, dpi:00000000)
    - MMainWnd:R: WM_GETICON: hwnd:00890268, lResult:00000000
- MMainWnd receives a WM_ACTIVATE post (activation). This WM_ACTIVATE post causes the following sequence:
    - IME:P: WM_647(hwnd:004B0388, wParam:00000017, lParam:00890268)
    - MMainWnd:P: WM_IME_SETCONTEXT(hwnd:00890268, fActive:1, dwShow:0xC000000F)
    - IME:P: WM_IME_SETCONTEXT(hwnd:004B0388, fActive:1, dwShow:0xC000000F)
    - MMainWnd:P: WM_IME_NOTIFY(hwnd:00890268, wSubMessage:00000002, lParam:00000000)
    - IME:P: WM_IME_NOTIFY(hwnd:004B0388, wSubMessage:00000002, lParam:00000000)
    - IME:R: WM_IME_NOTIFY: hwnd:004B0388, lResult:00000000
    - MMainWnd:R: WM_IME_NOTIFY: hwnd:00890268, lResult:00000000
    - IME:R: WM_IME_SETCONTEXT: hwnd:004B0388, lResult:00000000
    - MMainWnd:R: WM_IME_SETCONTEXT: hwnd:00890268, lResult:00000000
    - IME:R: WM_647(hwnd:004B0388, lResult:00000000)
    - MMainWnd:P: WM_SETFOCUS(hwnd:00890268, hwndOldFocus:00000000)
    - MMainWnd:R: WM_SETFOCUS: hwnd:00890268, lResult:00000000
- MMainWnd receives a WM_NCPAINT post, and then a WM_ERASEBKGND post.
- The IME window receives a WM_WINDOWPOSCHANGED post, and then MMainWnd receives a WM_WINDOWPOSCHANGED post with the same parameters.
- MMainWnd receives a WM_SIZE post, a WM_MOVE post, and then a WM_PAINT post.
- The EDIT control receives a WM_PAINT post. This WM_PAINT post causes the following sequence:
    - EDIT:P: WM_NCPAINT(hwnd:00400784, hrgn:00000001)
    - EDIT:R: WM_NCPAINT: hwnd:00400784, lResult:00000000
    - EDIT:P: WM_ERASEBKGND(hwnd:00400784, hdc:AE010F46)
    - MMainWnd:P: WM_CTLCOLOR(hwnd:00890268, hdc:AE010F46, hwndChild:00400784, type:1)
    - MMainWnd:R: WM_CTLCOLOREDIT: hwnd:00890268, lResult:00100075
    - EDIT:R: WM_ERASEBKGND: hwnd:00400784, lResult:00000001
    - MMainWnd:P: WM_CTLCOLOR(hwnd:00890268, hdc:AE010F46, hwndChild:00400784, type:1)
    - MMainWnd:R: WM_CTLCOLOREDIT: hwnd:00890268, lResult:00100075
- MMainWnd receives a WM_GETICON send.
- MMainWnd receives a WM_799 (wParam:00000001, lParam:00000000) post.
- MMainWnd receives a WM_GETICON send.
- MMainWnd receives a WM_49331 (wParam:00000000, lParam:00000000) post.
- MMainWnd receives a WM_GETMINMAXINFO post.
- MMainWnd receives a WM_GETICON send.
- MMainWnd receives a WM_TIMER post (id:999). This message is generated by SetTimer.
- MMainWnd receives a WM_COMMAND post.
- MMainWnd receives a WM_144 (wParam:00000000, lParam:00000000) post.
- MMainWnd receives a WM_WINDOWPOSCHANGING post and a WM_WINDOWPOSCHANGED post.
- MMainWnd receives a WM_NCACTIVATE post and a WM_ACTIVATE post (deactivation).
- The IME window receives a WM_ACTIVATEAPP post (deactivation).
- MMainWnd receives a WM_ACTIVATEAPP post (deactivation).
- MMainWnd receives a WM_KILLFOCUS post.
- The IME window receives a WM_647 post. This WM_647 causes the following sequence:
    - MMainWnd:P: WM_IME_SETCONTEXT(hwnd:00890268, fActive:0, dwShow:0xC000000F)
    - IME:P: WM_IME_SETCONTEXT(hwnd:004B0388, fActive:0, dwShow:0xC000000F)
    - MMainWnd:P: WM_IME_NOTIFY(hwnd:00890268, wSubMessage:00000001, lParam:00000000)
    - IME:P: WM_IME_NOTIFY(hwnd:004B0388, wSubMessage:00000001, lParam:00000000)
    - IME:R: WM_IME_NOTIFY: hwnd:004B0388, lResult:00000000
    - MMainWnd:R: WM_IME_NOTIFY: hwnd:00890268, lResult:00000000
    - IME:R: WM_IME_SETCONTEXT: hwnd:004B0388, lResult:00000000
    - MMainWnd:R: WM_IME_SETCONTEXT: hwnd:00890268, lResult:00000000
- MMainWnd receives a WM_DESTROY post.
- The EDIT control receives a WM_DESTROY post.
- The IME window receives a WM_144 post (wParam:00000000, lParam:00000000).
- The IME window receives a WM_DESTROY post and a WM_NCDESTROY post
- The EDIT control receives a WM_NCDESTROY post.
- MMainWnd receives a WM_NCDESTROY post.
