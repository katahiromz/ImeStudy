# 2022-11-20

こんにちは。

こんにちはー

user32の解析、進んでますか？

はい

ReactOSとの違いは発見できましたか？

現状気になった点が

- ImeWnd_OnImeSelectでBroadCastMessageをしていない
- ImeWndProcWorkerの実装が変かもしれない(ここはもっと解析が必要です)

の2つです

BroadCastMessageはこちらも気づいてますが、修正しなかったんです。

なるほど

あと実装に直接関係なさそうなもので引っかかったものに

- ImeNotifyHandlerの引数が違う(具体的にはmsgがない)ことで実装のミスと勘違いした(実際にコードをたどると同じ処理だったので関係なし)
- GetImmFileNameがパスの長さを引数としてとっている(2k3は引数が1つ) この理由はわからないのでスルー

というのもあります

GetImmFileNameはバッファオーバーフロー対策で、バッファの長さを明示するというポリシーがあるようです。

なるほど、そういう意味があったんですね

あれからmzimejaをだいぶ改良しました。デバッグ出力を改善しました。課題ですが、最新のmzimejaで2k3とreactosにおけるデバッグ出力を比較して下さい。

了解です

今日はここまで。

ありがとうございました。

---

[戻る](2022-11-13.md) | [次へ](2022-11-27.md)
